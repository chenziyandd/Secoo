"use strict";var _createClass=function(){function n(o,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}return function(o,t,s){return t&&n(o.prototype,t),s&&n(o,s),o}}();function _classCallCheck(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}require(["config"],function(){require(["jquery"],function(){function o(){_classCallCheck(this,o),this.form=$(".registerForm"),this.input=$(".registerForm input:lt(3)"),this.span=$(".registerForm strong"),this.userid=$($(".registerForm input")[0]),this.userpsd=$($(".registerForm input")[1]),this.userpsdagain=$($(".registerForm input")[2]),this.check=$($(".registerForm input")[3]),this.idlock=!1,this.paslock=!1,this.paslock2=!1,this.checklock=!1,this.protocol=$(".registerForm a"),this.protocolInfo=$("#protocolInfo"),this.protocolClose=$("#protocolInfo .protocolCont .protocolTitle strong"),this.protocolAgree=$("#protocolInfo .protocolCont .protocolConfirm button")}(new(_createClass(o,[{key:"init",value:function(){this.inputfocus(),this.inputblur(),this.protocolfn(),this.onsubmit()}},{key:"inputfocus",value:function(){this.input.on("focus",function(){$(this).addClass("active")})}},{key:"inputblur",value:function(){var t=this,o="";this.input.on("blur",function(){$(this).removeClass("active")}),this.userid.on("blur",function(){""!=$(this).val()?/^[\w]{4,12}$/.test($(this).val())?$.ajax({type:"post",url:"../php/charge.php",data:{username:$(this).val()}}).done(function(o){o?($(t.span[0]).addClass("warn"),$(t.span[0]).html("用户名已存在"),t.idlock=!1):($(t.span[0]).removeClass("warn"),$(t.span[0]).html("√"),t.idlock=!0)}):($(t.span[0]).addClass("warn"),$(t.span[0]).html("请输入4-12位有效用户名"),t.idlock=!1):($(t.span[0]).addClass("warn"),$(t.span[0]).html("用户名不能为空"),t.idlock=!1)}),this.userpsd.on("blur",function(){o=$(this).val(),""!=$(this).val()?/^[\w]{6,12}$/.test($(this).val())?($(t.span[1]).removeClass("warn"),$(t.span[1]).html("√"),t.paslock=!0):($(t.span[1]).addClass("warn"),$(t.span[1]).html("请输入6-12位有效密码"),t.paslock=!1):($(t.span[1]).addClass("warn"),$(t.span[1]).html("密码不能为空"),t.paslock=!1)}),this.userpsdagain.on("blur",function(){$(this).val()==o?($(t.span[2]).removeClass("warn"),$(t.span[2]).html("√"),t.paslock2=!0):($(t.span[2]).addClass("warn"),$(t.span[2]).html("两次输入密码不一致"),t.paslock2=!1)})}},{key:"protocolfn",value:function(){var o=this;this.protocol.on("click",function(){o.protocolInfo.show()}),this.protocolClose.on("click",function(){o.protocolInfo.hide()}),this.protocolAgree.on("click",function(){o.protocolInfo.hide(),o.check.prop("checked",!0)})}},{key:"onsubmit",value:function(){var o=this;this.form.on("submit",function(){return o.idlock&&o.paslock&&o.paslock2?o.check.prop("checked")?void 0:(alert("请同意本站注册协议!"),!1):(alert("注册信息有误!"),!1)})}}]),o)).init(),$("#loginHead").load("loginheader.html"),$("#loginFooter").load("footer.html")})});