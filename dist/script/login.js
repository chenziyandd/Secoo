"use strict";var _createClass=function(){function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}require(["config"],function(){require(["jquery"],function(){function t(){_classCallCheck(this,t),this.tab=$(".ewmtitle li"),this.tabCont=$(".ewmcont form"),this.input=$(".ewmcont .psd input:lt(3)"),this.yzmimg=$("#yzmimg"),this.loginBtn=$("#loginBtn"),this.rememberMe=$("#rememberMe")}(new(_createClass(t,[{key:"init",value:function(){this.tabswitch(),this.inputfocus(),this.inputblur(),this.yzminit(),this.yzmchange(),this.onsubmit(),this.useridinit()}},{key:"tabswitch",value:function(){var t=this;this.tab.on("click",function(){$(this).addClass("on").siblings("li").removeClass("on"),t.tabCont.eq($(this).index()).show().siblings("form").hide()})}},{key:"inputfocus",value:function(){var t=this;this.input.on("focus",function(){$(this).addClass("active")}),$(this.input[1]).on("focus",function(){$(t.input[2]).show(),$(t.yzmimg).show().css("display","inline-block")})}},{key:"inputblur",value:function(){this.input.on("blur",function(){$(this).removeClass("active")})}},{key:"useridinit",value:function(){localStorage.getItem("uesrid")&&(this.input[0].value=localStorage.getItem("uesrid"),this.rememberMe.prop("checked",!0))}},{key:"yzminit",value:function(){for(var t=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i=[],e=0;e<4;e++)i.push(t[this.random(0,t.length-1)]);var n=i.join("");this.yzmimg.html(n)}},{key:"yzmchange",value:function(){var o=this;this.yzmimg.on("click",function(){for(var t=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i=[],e=0;e<4;e++)i.push(t[o.random(0,t.length-1)]);var n=i.join("");o.yzmimg.html(n)})}},{key:"random",value:function(t,i){return parseInt(Math.random()*(i-t+1))}},{key:"onsubmit",value:function(){var i=this;this.loginBtn.on("click",function(){i.input[2].value==i.yzmimg.html()?$.ajax({type:"post",url:"../php/charge.php",data:{username:i.input[0].value,passowrd:i.input[1].value}}).done(function(t){t?(i.rememberMe.prop("checked")?localStorage.setItem("uesrid",i.input[0].value):localStorage.removeItem("uesrid"),location.href="index.html",localStorage.setItem("adminname",i.input[0].value)):alert("用户名或者密码错误")}):alert("验证码错误")})}}]),t)).init(),$("#loginHead").load("loginheader.html"),$("#loginFooter").load("footer.html")})});